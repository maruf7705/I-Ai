<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduBuddy - AI Study Assistant</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9fafb;
        }
        
        .chat-bubble {
            animation: fadeIn 0.3s ease-out;
        }
        
        .pulse {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .speech-wave {
            display: flex;
            justify-content: center;
            gap: 4px;
            height: 24px;
            align-items: flex-end;
        }
        
        .speech-wave span {
            display: block;
            width: 4px;
            height: 8px;
            background-color: #3b82f6;
            border-radius: 4px;
            animation: speech-wave 1.2s ease-in-out infinite;
        }
        
        .speech-wave span:nth-child(1) { animation-delay: 0.1s; }
        .speech-wave span:nth-child(2) { animation-delay: 0.2s; }
        .speech-wave span:nth-child(3) { animation-delay: 0.3s; }
        .speech-wave span:nth-child(4) { animation-delay: 0.4s; }
        .speech-wave span:nth-child(5) { animation-delay: 0.3s; }
        .speech-wave span:nth-child(6) { animation-delay: 0.2s; }
        .speech-wave span:nth-child(7) { animation-delay: 0.1s; }
        
        @keyframes speech-wave {
            0% { height: 8px; }
            50% { height: 24px; }
            100% { height: 8px; }
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50">
    <div class="container mx-auto max-w-6xl px-4 py-8">
        <!-- Header -->
        <header class="flex items-center justify-between mb-8">
            <div class="flex items-center space-x-4">
                <div class="w-12 h-12 rounded-full bg-gradient-to-tr from-blue-500 to-teal-400 flex items-center justify-center">
                    <i data-feather="book-open" class="text-white"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-bold text-gray-800">EduBuddy</h1>
                    <p class="text-sm text-gray-500">AI Study Assistant</p>
                </div>
            </div>
            <div class="flex items-center space-x-2">
                <button class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                    <i data-feather="settings" class="text-gray-500"></i>
                </button>
                <button class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                    <i data-feather="help-circle" class="text-gray-500"></i>
                </button>
            </div>
        </header>

        <div class="flex flex-col lg:flex-row gap-6">
            <!-- Sidebar -->
            <div class="lg:w-64 bg-white rounded-xl shadow-sm p-6 hidden lg:block">
                <div class="mb-6">
                    <h2 class="font-medium text-gray-700 mb-3">Quick Actions</h2>
                    <ul class="space-y-2">
                        <li>
                            <button class="w-full text-left px-3 py-2 text-sm rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors">
                                Ask about class schedule
                            </button>
                        </li>
                        <li>
                            <button class="w-full text-left px-3 py-2 text-sm rounded-lg bg-gray-50 text-gray-600 hover:bg-gray-100 transition-colors">
                                Exam information
                            </button>
                        </li>
                        <li>
                            <button class="w-full text-left px-3 py-2 text-sm rounded-lg bg-gray-50 text-gray-600 hover:bg-gray-100 transition-colors">
                                Study resources
                            </button>
                        </li>
                        <li>
                            <button class="w-full text-left px-3 py-2 text-sm rounded-lg bg-gray-50 text-gray-600 hover:bg-gray-100 transition-colors">
                                Assignment help
                            </button>
                        </li>
                    </ul>
                </div>
                
                <div>
                    <h2 class="font-medium text-gray-700 mb-3">Recent Chats</h2>
                    <ul class="space-y-2">
                        <li>
                            <button class="w-full text-left px-3 py-2 text-sm rounded-lg bg-gray-50 text-gray-600 hover:bg-gray-100 transition-colors truncate">
                                Calculus midterm prep
                            </button>
                        </li>
                        <li>
                            <button class="w-full text-left px-3 py-2 text-sm rounded-lg bg-gray-50 text-gray-600 hover:bg-gray-100 transition-colors truncate">
                                History essay structure
                            </button>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Main Chat Area -->
            <div class="flex-1 flex flex-col">
                <div class="bg-white rounded-xl shadow-sm flex-1 flex flex-col overflow-hidden">
                    <!-- Chat Header -->
                    <div class="border-b border-gray-100 p-4 flex items-center">
                        <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center">
                            <i data-feather="message-square" class="text-blue-500"></i>
                        </div>
                        <div class="ml-3">
                            <h3 class="font-medium text-gray-800">Study Assistant</h3>
                            <div class="text-xs text-gray-500 flex items-center">
                                <span class="w-2 h-2 rounded-full bg-green-400 mr-1"></span>
                                Active now
                            </div>
                        </div>
                    </div>

                    <!-- Messages -->
                    <div class="flex-1 overflow-y-auto p-4 space-y-4" id="chat-container">
                        <!-- AI Message -->
                        <div class="flex items-start">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center">
                                <i data-feather="cpu" class="text-blue-500 w-4 h-4"></i>
                            </div>
                            <div class="ml-3">
                                <div class="bg-blue-50 rounded-lg px-4 py-2 max-w-xs lg:max-w-md chat-bubble">
                                    <p class="text-gray-800">Hello there! I'm EduBuddy, your AI study assistant. How can I help you today?</p>
                                </div>
                                <p class="text-xs text-gray-400 mt-1">Just now</p>
                            </div>
                        </div>

                        <!-- User Message -->
                        <div class="flex items-start justify-end">
                            <div class="mr-3 text-right">
                                <div class="bg-blue-500 rounded-lg px-4 py-2 max-w-xs lg:max-w-md chat-bubble">
                                    <p class="text-white">When is my next calculus class?</p>
                                </div>
                                <p class="text-xs text-gray-400 mt-1">Just now</p>
                            </div>
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center">
                                <i data-feather="user" class="text-white w-4 h-4"></i>
                            </div>
                        </div>

                        <!-- AI Message -->
                        <div class="flex items-start">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center">
                                <i data-feather="cpu" class="text-blue-500 w-4 h-4"></i>
                            </div>
                            <div class="ml-3">
                                <div class="bg-blue-50 rounded-lg px-4 py-2 max-w-xs lg:max-w-md chat-bubble">
                                    <p class="text-gray-800">Your next Calculus 101 class is tomorrow at 10:00 AM in Building A, Room 203.</p>
                                    <div class="mt-2 p-2 bg-white rounded border border-gray-100">
                                        <p class="text-xs font-medium text-gray-700 mb-1">Class Details</p>
                                        <p class="text-xs text-gray-600">Calculus 101 with Prof. Smith</p>
                                        <p class="text-xs text-gray-600">Mon/Wed 10:00 AM - 11:15 AM</p>
                                    </div>
                                </div>
                                <p class="text-xs text-gray-400 mt-1">Just now</p>
                            </div>
                        </div>
                    </div>

                    <!-- Input Area -->
                    <div class="border-t border-gray-100 p-4">
                        <div class="flex items-center">
                            <button class="p-2 rounded-full hover:bg-gray-50 transition-colors mr-2">
                                <i data-feather="paperclip" class="text-gray-500"></i>
                            </button>
                            <div class="flex-1 relative">
                                <textarea 
                                    id="message-input"
                                    placeholder="Ask a question about your studies..." 
                                    rows="1"
                                    class="w-full border border-gray-200 rounded-full px-4 py-3 pr-12 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300 resize-none"
                                    style="min-height: 48px; max-height: 120px;"
                                ></textarea>
                                <div class="absolute right-2 bottom-2 flex items-center space-x-1">
                                    <button id="voice-btn" class="w-8 h-8 rounded-full flex items-center justify-center hover:bg-gray-50 transition-colors">
                                        <i data-feather="mic" class="text-gray-500 w-4 h-4"></i>
                                    </button>
                                    <button id="send-btn" class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center hover:bg-blue-600 transition-colors">
                                        <i data-feather="send" class="text-white w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="mt-2 text-xs text-gray-400 flex items-center justify-between">
                            <span>EduBuddy may produce inaccurate information</span>
                            <span class="font-medium">v1.0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Voice Modal -->
    <div id="voice-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 max-w-sm w-full mx-4">
            <div class="text-center">
                <div class="w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center mx-auto mb-4">
                    <div id="voice-animation" class="speech-wave">
                        <span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                    </div>
                </div>
                <h3 class="font-medium text-lg text-gray-800 mb-1">Listening...</h3>
                <p class="text-gray-500 text-sm mb-4">Speak clearly into your microphone</p>
                <button id="stop-voice-btn" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">
                    Stop Listening
                </button>
            </div>
        </div>
    </div>

    <script>
        feather.replace();
        
        // Auto-resize textarea
        const textarea = document.getElementById('message-input');
        textarea.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });
        
        // Voice button functionality
        const voiceBtn = document.getElementById('voice-btn');
        const voiceModal = document.getElementById('voice-modal');
        const stopVoiceBtn = document.getElementById('stop-voice-btn');
        
        voiceBtn.addEventListener('click', function() {
            voiceModal.classList.remove('hidden');
            // Here you would add actual voice recognition logic
        });
        
        stopVoiceBtn.addEventListener('click', function() {
            voiceModal.classList.add('hidden');
            // Here you would stop voice recognition
        });
        
        // Send button functionality
        const sendBtn = document.getElementById('send-btn');
        const chatContainer = document.getElementById('chat-container');
        
        sendBtn.addEventListener('click', function() {
            const message = textarea.value.trim();
            if (message) {
                // Add user message to chat
                const userMessageHtml = `
                    <div class="flex items-start justify-end">
                        <div class="mr-3 text-right">
                            <div class="bg-blue-500 rounded-lg px-4 py-2 max-w-xs lg:max-w-md chat-bubble">
                                <p class="text-white">${message}</p>
                            </div>
                            <p class="text-xs text-gray-400 mt-1">Just now</p>
                        </div>
                        <div class="flex-shrink-0 w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center">
                            <i data-feather="user" class="text-white w-4 h-4"></i>
                        </div>
                    </div>
                `;
                chatContainer.insertAdjacentHTML('beforeend', userMessageHtml);
                textarea.value = '';
                textarea.style.height = '48px';
                
                // Scroll to bottom
                chatContainer.scrollTop = chatContainer.scrollHeight;
                
                // Show typing indicator
                const typingIndicator = `
                    <div class="flex items-start">
                        <div class="flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center">
                            <i data-feather="cpu" class="text-blue-500 w-4 h-4"></i>
                        </div>
                        <div class="ml-3">
                            <div class="bg-blue-50 rounded-lg px-4 py-2 w-24">
                                <div class="flex space-x-1">
                                    <div class="w-2 h-2 rounded-full bg-blue-300 pulse"></div>
                                    <div class="w-2 h-2 rounded-full bg-blue-300 pulse" style="animation-delay: 0.2s"></div>
                                    <div class="w-2 h-2 rounded-full bg-blue-300 pulse" style="animation-delay: 0.4s"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                chatContainer.insertAdjacentHTML('beforeend', typingIndicator);
                chatContainer.scrollTop = chatContainer.scrollHeight;
                
                // Simulate AI response after delay
                setTimeout(() => {
                    // Remove typing indicator
                    const indicators = document.querySelectorAll('.pulse');
                    indicators.forEach(indicator => indicator.parentElement.parentElement.parentElement.parentElement.remove());
                    
                    // Add AI response
                    const aiResponses = [
                        "I can help you with that! Your next assignment is due next Monday.",
                        "According to your syllabus, the midterm exam is scheduled for November 15th.",
                        "I found some great study resources for this topic. Would you like me to share them?",
                        "Your professor's office hours are Tuesdays and Thursdays from 2-4 PM."
                    ];
                    const randomResponse = aiResponses[Math.floor(Math.random() * aiResponses.length)];
                    
                    const aiMessageHtml = `
                        <div class="flex items-start">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center">
                                <i data-feather="cpu" class="text-blue-500 w-4 h-4"></i>
                            </div>
                            <div class="ml-3">
                                <div class="bg-blue-50 rounded-lg px-4 py-2 max-w-xs lg:max-w-md chat-bubble">
                                    <p class="text-gray-800">${randomResponse}</p>
                                </div>
                                <p class="text-xs text-gray-400 mt-1">Just now</p>
                            </div>
                        </div>
                    `;
                    chatContainer.insertAdjacentHTML('beforeend', aiMessageHtml);
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                    feather.replace();
                }, 1500);
            }
        });
        
        // Also send message on Enter key (but allow Shift+Enter for new lines)
        textarea.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendBtn.click();
            }
        });
    </script>
</body>
</html>
